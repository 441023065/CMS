<div class="widget" id="recentmessages">
    <h3>最新留言</h3>
    <div class="templateloading" id="div-sidebar-recentmessages-detail-loader"></div>
    <ul class="templatecontainer" data-bind="template: { name: 'recentBoardViewModelTemplate', foreach: board }, fadeInVisible: board ">
    </ul>
</div>
<script type="text/javascript">
    function RecentBoardViewModel() {
        var self = this;

        ko.bindingHandlers.fadeInVisible = {
            init: function (element) {
                fadeInVisibleFunction(element, "div-sidebar-recentmessages-detail-loader");
            }
        };

        self.board = ko.observableArray();
        $.getJSON('/board/recent', self.board);
    }

    $(document).ready(function () {
        ko.applyBindings(new RecentBoardViewModel(), document.getElementById("recentmessages"));
    });
</script>
<script type="text/html" id="recentBoardViewModelTemplate">
    <li>
        <a href="/board" data-bind="text: $data.Author, attr: { title: $data.Content }"></a>
        :
        <span data-bind="text: $data.Content"></span>
    </li>
</script>